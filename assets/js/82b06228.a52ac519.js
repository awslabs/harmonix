"use strict";(self.webpackChunk_aws_harmonix_on_aws_website=self.webpackChunk_aws_harmonix_on_aws_website||[]).push([[4745],{8405:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>m,default:()=>A,frontMatter:()=>f,metadata:()=>i,toc:()=>v});const i=JSON.parse('{"id":"tutorials/create-environments","title":"Create an Environment","description":"In this tutorial, you will build out an Environment Provider and Environment for containerized applications. In practice, these actions are typically performed by someone in a Platform Engineer role.  This Environment Provider will provide the required infrastructure to run containerized applications in an Elastic Container Service (ECS) cluster. The Environment entity will reference the new Environment Providers and will be used by an Application Developer as a target into which they will deploy their applications and microservices.","source":"@site/docs/tutorials/create-environments.md","sourceDirName":"tutorials","slug":"/tutorials/create-environments","permalink":"/docs/tutorials/create-environments","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Create an Environment"},"sidebar":"tutorialSidebar","previous":{"title":"Tutorials","permalink":"/docs/category/tutorials"},"next":{"title":"Create Apps","permalink":"/docs/tutorials/create-app"}}');var r=n(74848),s=n(28453);const l=n.p+"assets/images/ecs-env-provider-1-a9f896668fde9d53f67b5ecd547007f0.png",o=n.p+"assets/images/ecs-env-provider-2-dbda7f4fa464f9d05017aba167d6209a.png",d=n.p+"assets/images/ecs-env-provider-3-395dffdb4622a76ff7b0f55e0e40a03b.png",c=n.p+"assets/images/ecs-env-provider-4-66b270e2f6bb00e008fd0c09fcedf55c.png",h=n.p+"assets/images/ecs-env-provider-5-388bc21e3e8b1be1fc1eaf32a3171f8b.png",a=n.p+"assets/images/ecs-env-1-45a9376c12715a2080ce0d944010c3c3.png",x=n.p+"assets/images/ecs-env-2-19e15df00008b2256c7468b2847d9851.png",p=n.p+"assets/images/ecs-env-3-8dc3e43764704668d1cf3743ffc22c0a.png",j=n.p+"assets/images/ecs-env-4-4968127dea86698aca4b3b4243b5e167.png",g=n.p+"assets/images/ecs-env-5-1beec98a5c33d292a45123df6f163528.png",f={sidebar_position:1,title:"Create an Environment"},m="Application Environment Tutorial",u={},v=[{value:"Create an Environment Provider",id:"create-an-environment-provider",level:2},{value:"Create an Environment",id:"create-an-environment",level:2}];function y(e){const t={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"application-environment-tutorial",children:"Application Environment Tutorial"})}),"\n",(0,r.jsx)(t.p,{children:"In this tutorial, you will build out an Environment Provider and Environment for containerized applications. In practice, these actions are typically performed by someone in a Platform Engineer role.  This Environment Provider will provide the required infrastructure to run containerized applications in an Elastic Container Service (ECS) cluster. The Environment entity will reference the new Environment Providers and will be used by an Application Developer as a target into which they will deploy their applications and microservices."}),"\n",(0,r.jsx)(t.h2,{id:"create-an-environment-provider",children:"Create an Environment Provider"}),"\n",(0,r.jsx)(t.p,{children:"We're going to start with creating a new AWS Environment Provider."}),"\n",(0,r.jsx)(t.p,{children:"In the default Harmonix on AWS solution used by this tutorial, the Infrastructure as Code source and CI/CD pipelines responsible for provisioning infrastructure have already been created and reside in a GitLab reference repository."}),"\n",(0,r.jsxs)(t.p,{children:["We'll use an ",(0,r.jsx)(t.strong,{children:"AWS ECS Environment Provider"})," template to provision our AWS Elastic Container Service (ECS) runtime environment."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"1."})," Click the Create.. menu on the left and Choose the ",(0,r.jsx)(t.strong,{children:"AWS ECS Environment Provider"})," template."]}),"\n",(0,r.jsx)("center",{children:(0,r.jsx)("img",{src:l,width:"70%",height:"auto"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"2."})," Provide input parameters to tailor the environment provider resources."]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Parameter"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Value"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"Name"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"ecs-dev-provider"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"A unique identifier for the environment provider"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"Prefix"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"ecsdev"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"A short prefix used for AWS resource creation"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"Description"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"A Dev environment provider for containerized applications"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Describes what the environment provider's purpose will be"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"Owner"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.em,{children:"Select a group from the drop-down list to own the Environment Provider"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"The group or user that will be responsible for the entity"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"AWS Account Number"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.em,{children:"Enter your 12-digit AWS account id"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"The AWS account where the environment provider will be created"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"AWS Region"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.em,{children:"Select the same region where you have deployed the Harmonix on AWS solution"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"The AWS region to provision resources in"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"Environment role arn"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsxs)(t.em,{children:["Enter the ARN of an IAM role with sufficient permission to deploy AWS infrastructure.  A sample role named ",(0,r.jsx)(t.code,{children:"opa-envprovisioning-role"})," was created when deploying the Harmonix on AWS solution.  The ARN format should be similar to ",(0,r.jsx)(t.code,{children:"arn:aws:iam::{AWS_ACCOUNT_ID}:role/{IAM_ROLE_NAME}"})]})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"The IAM role to be used for provisioning AWS resources in the target account and region"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"CIDR"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["10.0.0.0/24 ",(0,r.jsx)(t.em,{children:"(default)"})]}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"The CIDR block to be provisioned for the VPC associated with the ECS cluster to be created"})]})]})]}),"\n",(0,r.jsx)("center",{children:(0,r.jsx)("img",{src:o,width:"50%",height:"auto"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"3."})," Select ",(0,r.jsx)(t.strong,{children:"Next Step"})," and Provide Repository information"]}),"\n",(0,r.jsx)(t.p,{children:"In this step we provide information about the git repository where the Environment Provider source files will be published as part of executing the Software Template."}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Parameter"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Value"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Host:"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.em,{children:"default value"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"The GitLab host name"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Owner:"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.em,{children:"default value"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["The GitLab namespace where this repository will belong to.",(0,r.jsx)("br",{}),"It can be the name of organization, group, subgroup, user, or the project"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Repository:"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"ecs-dev-provider"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"The name for the git repository"})]})]})]}),"\n",(0,r.jsx)("center",{children:(0,r.jsx)("img",{src:d,width:"50%",height:"auto"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"4."})," Select ",(0,r.jsx)(t.strong,{children:"Next Step"}),", review your inputs and select ",(0,r.jsx)(t.strong,{children:"Create"}),"."]}),"\n",(0,r.jsx)("center",{children:(0,r.jsx)("img",{src:c,width:"50%",height:"auto"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"5."})," Environment Provider Entity Creation"]}),"\n",(0,r.jsx)(t.p,{children:"Upon clicking Create, the template starts executing automated action steps. It gets info from AWS, fetches ECS infrastructure code and other configuration files from the reference repository, updates configuration inside these files, and sets up a new git repository to store the files."}),"\n",(0,r.jsx)("center",{children:(0,r.jsx)("img",{src:h,width:"50%",height:"auto"})}),"\n",(0,r.jsx)(t.p,{children:"Once this git folder is ready, a CI/CD process will start automatically. It will use the infrastructure code in the git repository to provision your new ECS platform."}),"\n",(0,r.jsx)(t.p,{children:"Now, let's proceed to the next step to create an environment using the environment provider entity we just created."}),"\n",(0,r.jsx)(t.h2,{id:"create-an-environment",children:"Create an Environment"}),"\n",(0,r.jsxs)(t.p,{children:["To create an Environment Entity we will use the ",(0,r.jsx)(t.strong,{children:"AWS Environment"})," template from the software catalog section."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"1."})," On the Harmonix on AWS website, navigate to the ",(0,r.jsx)(t.strong,{children:"Create.."})," menu. From the list of available templates, choose the ",(0,r.jsx)(t.strong,{children:"AWS Environment"})," template card."]}),"\n",(0,r.jsx)("center",{children:(0,r.jsx)("img",{src:a,width:"70%",height:"auto"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"2."})," Provide input parameters to tailor the environment entity and click ",(0,r.jsx)(t.strong,{children:"Next Step"})]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Parameter"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Value"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"Name"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"ecs-dev"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"A unique identifier for the environment"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"Short Name"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"ecsdev"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"A short identifier used for identification of environments"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"Description"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"Development environment for containerized applications deployed to ECS"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Describes the purpose of the environment"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"Environment Type"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"AWS ECS"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Specifies the type of applications that can be deployed and managed in this environment"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"Deployment Requires Approval"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"No"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Allows for blocking a CI/CD pipeline until approval is received.  This is often set to 'No' for development and test, but 'Yes' for production"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"Owner"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.em,{children:"Select a group from the drop-down list to own the Environment"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"The group or user that will be responsible for the entity."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"Account Type"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Single-account"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Indicates whether the environment supports one or more accounts"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"Region Type"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Single-region"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Indicates whether the environment supports one or more regions"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"Category"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Development"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Identifies the intended purpose of the environment (dev, test, prod, etc)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"Classification"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"public"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Identifies visibility of the environment (public-facing, internal-facing, or private)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"System"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"demo"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Identifies the relationship of this environment to a larger system.  This can be used to group environments together."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"Hierarchy of the Environment"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"1"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Value used to determine relative ordering for environments.  Typical approaches are to use lower numbers for development and higher numbers for production."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"Providers"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"ecs-dev-provider"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Selects one or more environment providers to attach to this environment.  In this tutorial, there may only one environment provider available, so the drop-down list is disabled and the available environment provider will be used."})]})]})]}),"\n",(0,r.jsx)("center",{children:(0,r.jsx)("img",{src:x,width:"70%",height:"auto"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"2."})," Click ",(0,r.jsx)(t.strong,{children:"Next Step"})," and fill in the remaining information:"]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Parameter"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Value"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"Host"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.em,{children:"default value"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"The GitLab host name"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"Owner"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.em,{children:"default value"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["The GitLab namespace where this repository will belong to.",(0,r.jsx)("br",{}),"It can be the name of organization, group, subgroup, user, or the project"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"Repository"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"ecs-dev"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"The name for the git repository"})]})]})]}),"\n",(0,r.jsx)("center",{children:(0,r.jsx)("img",{src:p,width:"70%",height:"auto"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"3."})," Click ",(0,r.jsx)(t.strong,{children:"Next Step"})," and review your inputs. Click ",(0,r.jsx)(t.strong,{children:"Create"})]}),"\n",(0,r.jsx)("center",{children:(0,r.jsx)("img",{src:j,width:"70%",height:"auto"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"4."})," The template scaffolding action will fetch a ",(0,r.jsx)(t.code,{children:"catalog-info.yaml"})," file (used to define entities), replace the placeholders with our input we just provided, push the file to a new repo, and register it to the Backstage catalog."]}),"\n",(0,r.jsx)("center",{children:(0,r.jsx)("img",{src:g,width:"70%",height:"auto"})}),"\n",(0,r.jsx)(t.p,{children:"Now that our Environment Entity is created, our developers can discover and point to the it during their app scaffolding process. Let's proceed to the next step and explore the ECS Environment Entity we just created."})]})}function A(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(y,{...e})}):y(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>o});var i=n(96540);const r={},s=i.createContext(r);function l(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);