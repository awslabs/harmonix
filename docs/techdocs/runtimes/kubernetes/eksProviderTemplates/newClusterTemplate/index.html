<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-techdocs/runtimes/kubernetes/eksProviderTemplates/newClusterTemplate" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">New Cluster Template | Harmonix on AWS</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://harmonixonaws.io/img/harmonix-blue.png"><meta data-rh="true" name="twitter:image" content="https://harmonixonaws.io/img/harmonix-blue.png"><meta data-rh="true" property="og:url" content="https://harmonixonaws.io/docs/techdocs/runtimes/kubernetes/eksProviderTemplates/newClusterTemplate"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="New Cluster Template | Harmonix on AWS"><meta data-rh="true" name="description" content="The &quot;AWS EKS Environment Provider&quot; template will create everything Harmonix needs to provision an EKS runtime. This includes creating and configuring the EKS cluster. You can customize this template to best suit your standards or use it as a reference to create your own template from scratch. The template itself allows for the user to make choices with respect to infrastructure creation."><meta data-rh="true" property="og:description" content="The &quot;AWS EKS Environment Provider&quot; template will create everything Harmonix needs to provision an EKS runtime. This includes creating and configuring the EKS cluster. You can customize this template to best suit your standards or use it as a reference to create your own template from scratch. The template itself allows for the user to make choices with respect to infrastructure creation."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://harmonixonaws.io/docs/techdocs/runtimes/kubernetes/eksProviderTemplates/newClusterTemplate"><link data-rh="true" rel="alternate" href="https://harmonixonaws.io/docs/techdocs/runtimes/kubernetes/eksProviderTemplates/newClusterTemplate" hreflang="en"><link data-rh="true" rel="alternate" href="https://harmonixonaws.io/docs/techdocs/runtimes/kubernetes/eksProviderTemplates/newClusterTemplate" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-K11BYW5K62"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-K11BYW5K62",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.3b043438.css">
<script src="/assets/js/runtime~main.d9acb8f7.js" defer="defer"></script>
<script src="/assets/js/main.540954ed.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#ffffff;color:#000000" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">Harmonix on AWS 0.3.4 is now available.  Check it out and give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/awslabs/harmonix">GitHub</a>! ⭐️.  View changes <a target="_blank" rel="noopener noreferrer" href="https://harmonixonaws.io/docs/CHANGELOG">here</a>.</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/harmonix-white.svg" alt="Harmonix on AWS Logo" class="harmonix-nav-logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/harmonix-white.svg" alt="Harmonix on AWS Logo" class="harmonix-nav-logo themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/docs/getting-started/deploy-the-platform">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Documentation</a><a class="navbar__item navbar__link" href="/workshop">Workshop</a><a class="navbar__item navbar__link" href="/partners">Partners</a><a class="navbar__item navbar__link" href="/about">About</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/awslabs/harmonix" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="Github repository"></a><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/getting-started">Getting Started</a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/tutorials">Tutorials</a><button aria-label="Expand sidebar category &#x27;Tutorials&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/tech-docs">Tech Docs</a><button aria-label="Collapse sidebar category &#x27;Tech Docs&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/techdocs/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/techdocs/entities">Entities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/techdocs/plugins">Plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/techdocs/process">Processes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/environment-runtimes">Environment Runtimes</a><button aria-label="Collapse sidebar category &#x27;Environment Runtimes&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/generative-ai">Generative AI</a><button aria-label="Expand sidebar category &#x27;Generative AI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/kubernetes--eks">Kubernetes &amp; EKS</a><button aria-label="Collapse sidebar category &#x27;Kubernetes &amp; EKS&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/techdocs/runtimes/kubernetes/gettingStarted">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/techdocs/runtimes/kubernetes/architecture">Harmonix EKS Architecture</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/eks-provider-templates">EKS Provider Templates</a><button aria-label="Collapse sidebar category &#x27;EKS Provider Templates&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/techdocs/runtimes/kubernetes/eksProviderTemplates/newClusterTemplate">New Cluster Template</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/techdocs/runtimes/kubernetes/eksProviderTemplates/importClusterTemplate">Import Cluster Template</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/techdocs/runtimes/kubernetes/k8sApps">Kubernetes Applications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/techdocs/runtimes/kubernetes/clusterAccess">Cluster Access</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/techdocs/security">Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/techdocs/permission">Permissions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/techdocs/customizations">Customizations</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed hidden"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/diy">DIY</a><button aria-label="Expand sidebar category &#x27;DIY&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/integration">Integration</a><button aria-label="Expand sidebar category &#x27;Integration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/migrations">Migrations</a><button aria-label="Expand sidebar category &#x27;Migrations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/features">Features</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq">FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tests">Test Cases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/CONTRIBUTING">CONTRIBUTING</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/CHANGELOG">Changelog</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/tech-docs"><span itemprop="name">Tech Docs</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/environment-runtimes"><span itemprop="name">Environment Runtimes</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/kubernetes--eks"><span itemprop="name">Kubernetes &amp; EKS</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/eks-provider-templates"><span itemprop="name">EKS Provider Templates</span></a><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">New Cluster Template</span><meta itemprop="position" content="5"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>New Cluster Template</h1></header>
<p>The &quot;AWS EKS Environment Provider&quot; template will create everything Harmonix needs to provision an EKS runtime. This includes creating and configuring the EKS cluster. You can customize this template to best suit your standards or use it as a reference to create your own template from scratch. The template itself allows for the user to make choices with respect to infrastructure creation.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="template-choice-examples">Template Choice Examples<a href="#template-choice-examples" class="hash-link" aria-label="Direct link to Template Choice Examples" title="Direct link to Template Choice Examples">​</a></h4>
<ul>
<li>Create an EKS cluster that is made up of managed nodes or utilize a serverless approach with Fargate.</li>
<li>Have the IaC create a new VPC for you or use an existing one.</li>
<li>Expose your cluster&#x27;s API publicly or to keep it private.</li>
<li>Create an IAM role that can be used for cluster administration (both EKS and kubernetes administration) or supply your own existing IAM role if you do not want the template to create one for you.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="screenshot-of-the-aws-eks-environment-provider-template">Screenshot of the AWS EKS Environment Provider Template:<a href="#screenshot-of-the-aws-eks-environment-provider-template" class="hash-link" aria-label="Direct link to Screenshot of the AWS EKS Environment Provider Template:" title="Direct link to Screenshot of the AWS EKS Environment Provider Template:">​</a></h4>
<p align="center"></p><p><img decoding="async" loading="lazy" alt="eks_new_cluster.png" src="/assets/images/eks_new_cluster-0a30ccc554f6453881d01ce5cd7cae37.png" width="1938" height="1418" class="img_ev3q"></p><p></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="aws-infrastructure-created-by-this-template">AWS Infrastructure Created By This Template<a href="#aws-infrastructure-created-by-this-template" class="hash-link" aria-label="Direct link to AWS Infrastructure Created By This Template" title="Direct link to AWS Infrastructure Created By This Template">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="standard-harmonix-provider-components">Standard Harmonix Provider Components:<a href="#standard-harmonix-provider-components" class="hash-link" aria-label="Direct link to Standard Harmonix Provider Components:" title="Direct link to Standard Harmonix Provider Components:">​</a></h4>
<ul>
<li>IAM Roles<!-- -->
<ul>
<li>Harmonix Operations Role<!-- -->
<ul>
<li>Has sufficient permissions to perform operations on the environment provider&#x27;s resources</li>
</ul>
</li>
<li>Harmonix Provisioning Role<!-- -->
<ul>
<li>Has sufficient permissions to provision the environment provider&#x27;s resources</li>
</ul>
</li>
</ul>
</li>
<li>Audit Table<!-- -->
<ul>
<li>A dedicated DynamoDB table to capture the actions performed on the applications that are running on this environment provider.</li>
</ul>
</li>
<li>VPC<!-- -->
<ul>
<li>Created unless an existing VPC ID is provided by the user</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eks-specific-provider-components">EKS-specific Provider Components:<a href="#eks-specific-provider-components" class="hash-link" aria-label="Direct link to EKS-specific Provider Components:" title="Direct link to EKS-specific Provider Components:">​</a></h4>
<ul>
<li>Security Groups<!-- -->
<ul>
<li>Allow communication between kubernetes worker nodes and the API server</li>
</ul>
</li>
<li>EKS Cluster</li>
<li>OIDC Provider<!-- -->
<ul>
<li>A cluster-specific OIDC provider that is used for pods to assume IAM roles</li>
<li><a href="https://docs.aws.amazon.com/eks/latest/userguide/iam-roles-for-service-accounts.html" target="_blank" rel="noopener noreferrer">More information on IAM Roles for Service Accounts</a></li>
</ul>
</li>
<li>IAM Roles<!-- -->
<ul>
<li>EKS Cluster Role<!-- -->
<ul>
<li>Role that provides permissions for the Kubernetes control plane to make calls to AWS API operations on your behalf.</li>
</ul>
</li>
<li>Cluster Node Role<!-- -->
<ul>
<li>Gives permissions to the kubelet running on the node to make calls to other APIs on your behalf. This includes permissions to access container registries where your application containers are stored.</li>
</ul>
</li>
<li>Pod Execution Role (Fargate Only)<!-- -->
<ul>
<li>The pod execution role to use for pods that match the selectors in the Fargate profile. The pod execution role allows Fargate infrastructure to register with your cluster as a node, and it provides read access to Amazon ECR image repositories.</li>
</ul>
</li>
<li>Cluster Admin Role<!-- -->
<ul>
<li>Has EKS cluster administration privileges</li>
<li>Configured in aws-auth ConfigMap so that it has k8s cluster admin privileges</li>
<li>Used by CICD during provisioning provider resources</li>
<li>Can be assumed by administrators as well if its trust policy is customized</li>
</ul>
</li>
</ul>
</li>
<li>EC2 Instances<!-- -->
<ul>
<li>Provisioned for use as cluster nodes</li>
<li>Only created if the user chose to use Managed Nodes instead of Fargate for the cluster</li>
</ul>
</li>
<li>Kubectl Lambda Function<!-- -->
<ul>
<li>A lambda function used for configuring and querying kubernetes cluster resources, including installing Helm charts</li>
<li>This function runs in the same VPC as the EKS cluster so that it can communicate with the kubernetes API server even if the API server is not exposed publicly</li>
<li>Used by Infrastructure as Code (IaC) that adds/updates resources on the EKS cluster<!-- -->
<ul>
<li>For example, Harmonix&#x27;s EKS Environment Provider templates run CDK code to configure cluster resources</li>
</ul>
</li>
<li>Harmonix uses this lambda function to update and query the EKS cluster instead of using direct calls to the API server</li>
<li>This function makes use of kubectl (by way of a <a href="https://docs.aws.amazon.com/lambda/latest/dg/chapter-layers.html" target="_blank" rel="noopener noreferrer">lambda layer</a>). The version of kubectl it uses must be compatible with the kubernetes cluster version. If you update your kubernetes cluster version, you should also update the kubectl lambda layer so that the kubectl client version matches your cluster.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="harmonix-uses-of-the-kubectl-lambda-function">Harmonix Uses of the Kubectl Lambda Function:<a href="#harmonix-uses-of-the-kubectl-lambda-function" class="hash-link" aria-label="Direct link to Harmonix Uses of the Kubectl Lambda Function:" title="Direct link to Harmonix Uses of the Kubectl Lambda Function:">​</a></h4>
<p align="center"></p><p><img decoding="async" loading="lazy" alt="kubectl_lambda.png" src="/assets/images/kubectl_lambda-7ba6e360cc4e87b5e5797b7e429bb84b.png" width="574" height="304" class="img_ev3q"></p><p></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-components-createdconfigured-by-this-template">Kubernetes Components Created/Configured By This Template<a href="#kubernetes-components-createdconfigured-by-this-template" class="hash-link" aria-label="Direct link to Kubernetes Components Created/Configured By This Template" title="Direct link to Kubernetes Components Created/Configured By This Template">​</a></h4>
<ul>
<li>
<p><a href="https://docs.aws.amazon.com/eks/latest/userguide/aws-load-balancer-controller.html" target="_blank" rel="noopener noreferrer">AWS Load Balancer Controller</a></p>
<ul>
<li>A controller that will create AWS Load Balancers based on Kubernetes configurations</li>
</ul>
</li>
<li>
<p><a href="https://fluentbit.io/" target="_blank" rel="noopener noreferrer">FluentBit</a></p>
<ul>
<li>Configured to forward pod logs to AWS Cloudwatch logs</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The Harmonix UI has a Logs tab that can show an application&#x27;s logs from a particular environment. If the cluster is not set up to have FluentBit (or a similar tool such as Fluentd) send application logs to CloudWatch, this functionality will not work.</p></div></div>
</li>
<li>
<p>ClusterRoleBinding</p>
<ul>
<li>This binds the principal that Harmonix uses to administer the cluster (&quot;opa-cluster-admin&quot;) to the ClusterRole that has cluster-wide admin permissions</li>
</ul>
</li>
<li>
<p>ClusterRole for viewing/listing namespaces</p>
<ul>
<li>Harmonix application operations make use of this ClusterRole</li>
</ul>
</li>
<li>
<p>aws-auth ConfigMap settings</p>
<ul>
<li>The aws-auth ConfigMap is updated to configure a k8s principal for Harmonix to use to perform cluster and application provisioning</li>
</ul>
</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/eks-provider-templates"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">EKS Provider Templates</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/techdocs/runtimes/kubernetes/eksProviderTemplates/importClusterTemplate"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Import Cluster Template</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#aws-infrastructure-created-by-this-template" class="table-of-contents__link toc-highlight">AWS Infrastructure Created By This Template</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/deploy-the-platform">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://harmonixonaws.io/docs/getting-started/videos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Video Tutorials<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/awslabs/harmonix" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Built with ❤️ at AWS | Copyright © 2024 Amazon.com, Inc. or its affiliates. All rights reserved</div></div></div></footer></div>
</body>
</html>